"use strict";const btnSearch=document.querySelector(".js-searchBtn"),form=document.querySelector(".js-form"),inputSearch=document.querySelector(".js-searchInput"),serieList=document.querySelector(".js-serieList"),favouriteSerieList=document.querySelector(".js-favouriteSerieList"),favouriteSection=document.querySelector(".js-aside"),btnRemove=document.querySelector(".js-btnRemove"),btnReset=document.querySelector(".js-reset");let seriesResultArrow=[],favouriteListArrow=[];function handlerForm(e){e.preventDefault()}function handlerEvent(){seriesResultArrow=[],connectToApi()}function connectToApi(){const e=inputSearch.value;fetch("//api.tvmaze.com/search/shows?q="+e).then((function(e){return e.json()})).then((function(e){seriesResultArrow=e,paintCard(),listenCard()}))}form.addEventListener("submit",handlerForm);const paintCard=function(){let e="";for(let t=0;t<seriesResultArrow.length;t++){const r=seriesResultArrow[t].show;e+=`<li class= "serieElement js-serieElement" id ="${r.id}">`,null===r.image?e+=`<img alt="foto car치tula ${r.name}" name= "foto ${r.name}" src="https://via.placeholder.com/210x295/B695C0/525252/?text=tv">`:e+=`<img alt="foto car치tula ${r.name}" name= "foto ${r.name}" src="${r.image.medium}" >`,e+=`<h3 class= "serieTitle">${r.name}</h3>`,e+="</li>"}serieList.innerHTML=e};btnSearch.addEventListener("click",handlerEvent);const listenCard=function(){const e=document.querySelectorAll(".js-serieElement");for(let t of e)t.addEventListener("click",favouriteSeries)},favouriteSeries=function(e){const t=e.currentTarget,r=parseInt(e.currentTarget.id),o=seriesResultArrow.find((function(e){return e.show.id===r}));if(-1===favouriteListArrow.findIndex((function(e){return e.show.id===r})))favouriteListArrow.push(o),t.classList.add("classFavourite"),paintFavourites();else{const e=favouriteListArrow+1;favouriteListArrow.splice(e,0),alert("This series is already in your favourite list")}setLocalStorage()},paintFavourites=function(){let e="";for(const t of favouriteListArrow)e+='<li class= "favouriteSeries">',null===t.show.image?e+=`<img class= "favouriteSeriesImg" alt="foto car치tula ${t.show.name}" name= "foto ${t.show.name}" src="https://via.placeholder.com/210x295/B695C0/525252/?text=tv">`:e+=`<img class= "favouriteSeriesImg"alt="foto car치tula ${t.show.name}" name= "foto ${t.show.name}" src="${t.show.image.medium}" >`,e+=`<h3 class = "favouriteSeriesTitle">${t.show.name}</h3>`,e+=`<button  class= "js-btnRemove btnRemove" type="button" id= ${t.show.id}> X </button>`,e+="</li>";favouriteSerieList.innerHTML=e,listenRemoveBtn()},listenRemoveBtn=function(){const e=document.querySelectorAll(".js-btnRemove");for(let t of e)t.addEventListener("click",removeFavouriteSeries)},removeFavouriteSeries=function(e){const t=parseInt(e.currentTarget.id);for(const e of favouriteListArrow)t===parseInt(e.show.id)&&favouriteListArrow.splice(0,1);setLocalStorage(),paintFavourites()};function setLocalStorage(){localStorage.setItem("favourites",JSON.stringify(favouriteListArrow))}function getFromLocalStorage(){const e=JSON.parse(localStorage.getItem("favourites"));if(null===e)return favouriteListArrow=[];favouriteListArrow=e,favouriteSection.classList.remove("hidden"),paintFavourites()}getFromLocalStorage();