"use strict";const btnSearch=document.querySelector(".js-searchBtn"),form=document.querySelector(".js-form"),inputSearch=document.querySelector(".js-searchInput"),serieList=document.querySelector(".js-serieList"),favouriteSerieList=document.querySelector(".js-favouriteSerieList"),favouriteSection=document.querySelector(".js-aside"),btnRemove=document.querySelector(".js-btnRemove");let seriesResultArrow=[],favouriteListArrow=[];function handlerForm(e){e.preventDefault()}function handlerEvent(){seriesResultArrow=[],connectToApi()}function connectToApi(){const e=inputSearch.value;console.log("entro"),fetch("http://api.tvmaze.com/search/shows?q="+e).then((function(e){return console.log(e.json),e.json()})).then((function(e){console.log(e),seriesResultArrow=e,paintCard(),listenCard()}))}form.addEventListener("submit",handlerForm);const paintCard=function(){let e="";for(let o=0;o<seriesResultArrow.length;o++){const t=seriesResultArrow[o].show;e+=`<li class= "serieElement js-serieElement" id ="${t.id}">`,null===t.image?e+=`<img alt="foto carátula ${t.name}" name= "foto ${t.name}" src="https://via.placeholder.com/210x295/B695C0/525252/?text=tv">`:e+=`<img alt="foto carátula ${t.name}" name= "foto ${t.name}" src="${t.image.medium}" >`,e+=`<h3 class= "serieTitle">${t.name}</h3>`,e+="</li>"}serieList.innerHTML=e};btnSearch.addEventListener("click",handlerEvent);const listenCard=function(){const e=document.querySelectorAll(".js-serieElement");for(let o of e)o.addEventListener("click",favouriteSeries)},getObject=function(e){return console.log("entro en getobject"),console.log(seriesResultArrow),console.log(favouriteListArrow),console.log(seriesResultArrow.find(o=>o.show.id===parseInt(e))),seriesResultArrow.find(o=>o.show.id===parseInt(e))},favouriteSeries=function(e){const o=e.currentTarget;console.log(o);const t=parseInt(e.currentTarget.id);console.log(t);const r=(s=t,console.log("entro en getobject"),console.log(seriesResultArrow),console.log(favouriteListArrow),console.log(seriesResultArrow.find(e=>e.show.id===parseInt(s))),seriesResultArrow.find(e=>e.show.id===parseInt(s)));var s;console.log(r),console.log(favouriteListArrow);const n=favouriteListArrow.indexOf(r);if(console.log(n),-1===n)favouriteSection.classList.remove("hidden"),favouriteListArrow.push(r),console.log(r),console.log(favouriteListArrow),console.log(o),console.log(o.classList.add("classFavourite")),paintFavourites();else{const e=favouriteListArrow+1;favouriteListArrow.splice(e,0),console.log(o.classList.remove("classFavourite")),console.log(favouriteListArrow)}setLocalStorage()},paintFavourites=function(){let e="";for(const o of favouriteListArrow)console.log(favouriteListArrow),console.log(o),e+='<li class= "favouriteSeries">',null===o.show.image?e+=`<img class= "favouriteSeriesImg" alt="foto carátula ${o.show.name}" name= "foto ${o.show.name}" src="https://via.placeholder.com/210x295/B695C0/525252/?text=tv">`:e+=`<img class= "favouriteSeriesImg"alt="foto carátula ${o.show.name}" name= "foto ${o.show.name}" src="${o.show.image.medium}" >`,e+=`<h3 class = "favouriteSeriesTitle">${o.show.name}</h3>`,e+=`<button  class= "js-btnRemove btnRemove" type="button" id= ${o.show.id}> X </button>`,e+="</li>";favouriteSerieList.innerHTML=e,listenRemoveBtn()},listenRemoveBtn=function(){console.log("entro en función listenerremove");const e=document.querySelectorAll(".js-btnRemove");console.log(e);for(let o of e)o.addEventListener("click",removeFavouriteSeries),console.log(o)},removeFavouriteSeries=function(e){const o=e.currentTarget;console.log(o),console.log("entro en función removeFavouriteSeries");const t=parseInt(e.currentTarget.id);console.log(t);for(const e of favouriteListArrow)console.log(e),console.log(e.show.id),console.log(favouriteListArrow),t===parseInt(e.show.id)&&(favouriteListArrow.splice(0,1),console.log(favouriteListArrow));setLocalStorage(),paintFavourites()};function setLocalStorage(){localStorage.setItem("favourites",JSON.stringify(favouriteListArrow))}function getFromLocalStorage(){const e=JSON.parse(localStorage.getItem("favourites"));if(null===e)return favouriteSection.classList.add("hidden"),console.log(favouriteSection.classList.add("hidden")),favouriteListArrow=[];favouriteListArrow=e,favouriteSection.classList.remove("hidden"),paintFavourites()}getFromLocalStorage();