{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n//DECLARACIÓN DE VARIABLES GLOBALES\nconst btnSearch = document.querySelector (\".js-searchBtn\");\nconst inputSearch = document.querySelector (\".js-searchInput\");\nconst filmList = document.querySelector (\".js-filmList\");\n\nlet filmsArrow = [];\nlet favouriteList = [];\n\n\n//CONECTAR CON EL SERVIDOR API cuando la usuaria hace click\n\n\nfunction connectToApi(){\n  const inputSearchValue = inputSearch.value;\n  //console.log (\"entro\");\n  fetch (`http://api.tvmaze.com/search/shows?q=${inputSearchValue}`)\n  .then (function (response) {\n    console.log(response.json);\n    return response.json(); \n  })\n  .then (function (data){\n    console.log(data);\n    filmsArrow = data; //me faltaba esto\n    paintCard();\n    listenCard();\n   /*  setLocalStorage(); */\n  })\n}\n\n//PINTAR TARJETAS DE PELÍCULAS\n\nconst paintCard = function(){\n  console.log (\"entro en paintcard\");\n  let filmHtml = \"\";\n  console.log (filmHtml);\n\n  for (let i=0; i < filmsArrow.length; i++){\n    console.log (i);\n    filmHtml += `<li class= \"filmElement js-filmElement\" id =\"${i}\">`;\n    console.log(filmsArrow[i].show);\n    const films = filmsArrow[i].show;\n    console.log (films);\n    console.log (films.name);\n  \n    if (films.image === null){\n      filmHtml += `<img alt=\"foto carátula ${films.name}\" name= \"foto ${films.name}\" src=\"https://via.placeholder.com/210x295/B695C0/525252/?text=tv\">`;\n    }\n    else {\n      \n      filmHtml += `<img alt=\"foto carátula ${films.name}\" name= \"foto ${films.name}\" src=\"${films.image.medium}\" >`;\n    }\n    filmHtml += `<h3 class= \"filmTitle\">${films.name}</h3>`;\n    filmHtml += \"</li>\"\n  }\n  filmList.innerHTML = filmHtml;\n  console.log (filmList);\n}\n\n//ESCUCHAR TARJETAS DE VISITA\n\nfunction listenCard(){\n  console.log (\"entro en función listenCard\");\n  const cardElements = document.querySelectorAll(\".js-filmElement\");\n  console.log (cardElements);\n  for (let cardElement of cardElements) {\n    cardElement.addEventListener('click', favouriteSeries);\n    console.log (cardElement);\n  }\n}\n\n//MARCAR COMO FAVORITAS LAS SERIRES SELECCIONADAS POR LA USUARIA (poner escuchador de eventos)\n\nconst favouriteSeries = function(event){\n//la escuchamos más arriba en la función listenCard\n  console.log (\"entro en función FavouriteSeries\");\n  console.log (event); //targetCurrent es null y target es la imagen\n\n  //Identifico el elemento clickado\n  const favouriteClicked = event.currentTarget;\n  console.log(favouriteClicked);\n  const favouriteClickedId = parseInt(event.currentTarget.id); \n  console.log (favouriteClickedId );\n  const findFavourite = favouriteList.indexOf(favouriteClickedId);\n\n  //Guardo los favoritos en un array let favouriteList = [];\n    //esto significa que no está dentro del array\n  if (findFavourite === -1){\n    favouriteList.push(favouriteClickedId);\n    console.log (favouriteList);\n    favouriteClicked.classList.add (\"favouriteSerie\");\n\n  } else {\n    favouriteList.splice (findFavourite, 1); \n      //aquí podríamos hacer una constante, \n      //splice nos indica que si ya está en el array, no queremos volverlo a ponerlo como favorito, por lo que lo quitamos, solo ese.\n  }\n/* paintCard();\nlistenCard(); */\n\n  // Busco el favorito en el array favouriteList:\n/*   console.log (cardElement);\n\n  const isFavourite = favouriteList.find (cardElement => cardElement.img.id === clicked); \n  console.log(isFavourite); */\n\n  //le añado la clase de favoritos. se la damos desde css al js\n  //le quito la clase de favoritos\n\n\n}\n\n\n\n\n\n\n\n\n//LOCAL STORAGE\n\n//2.1. Diagrama de flujo cuando la usuaria hace un evento.\n\n/* function setLocalStorage(){\n  localStorage.setItem (\"textinStorage\", favouriteSeries);\n  const stringFavouriteSeries = JSON.stringify (favouriteSeries);\n  }; */\n  \n//2.2. Diagrama de flujo al arrancar la página.\n\n  /* function getFromLocalStorage(){\n  const stringFavouriteStorage = localStorage.getItem (\"textinStorage\");\n  const favouriteStorage = JSON.parse (stringFavouriteStorage);\n\n  if (favouriteStorage !== null) {\n //aquí falta\n  }\n};\n\n\nfavouriteSeries.addEventListener (\"keyup\", setLocalStorage); //aquí mirar el elemento sobre el que se pone el escuchador */\n\nbtnSearch.addEventListener (\"click\", connectToApi);\n\n"]}